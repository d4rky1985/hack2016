{% extends '::base.html.twig' %}
{% block page %}
    <script>
        $( document ).on( "pagecreate", "#demo-page", function() {
            $( document ).on( "swipeleft swiperight", "#list li", function( event ) {
                var listitem = $( this ),
                        dir = event.type === "swipeleft" ? "left" : "right",
                        transition = $.support.cssTransform3d ? dir : false;
                confirmAndDelete( listitem, transition );
            });

            if ( ! $.mobile.support.touch ) {
                $( "#list" ).removeClass( "touch" );
                $( ".delete" ).on( "click", function() {
                    var listitem = $( this ).parent( "li" );

                    confirmAndDelete( listitem );
                });
            }

            function confirmAndDelete( listitem, transition ) {
                listitem.children( ".ui-btn" ).addClass( "ui-btn-active" );
                $( "#confirm .topic" ).remove();
                listitem.find( ".topic" ).clone().insertAfter( "#question" );
                $( "#confirm" ).popup( "open" );
                $( "#confirm #yes" ).on( "click", function() {
                    if ( transition ) {

                        listitem
                                .addClass( transition )
                                .on( "webkitTransitionEnd transitionend otransitionend", function() {
                                    listitem.remove();
                                    $( "#list" ).listview( "refresh" ).find( ".border-bottom" ).removeClass( "border-bottom" );
                                })
                                .prev( "li" ).children( "a" ).addClass( "border-bottom" )
                                .end().end().children( ".ui-btn" ).removeClass( "ui-btn-active" );
                    }
                    else {
                        listitem.remove();
                        $( "#list" ).listview( "refresh" );
                    }
                });
                $( "#confirm #cancel" ).on( "click", function() {
                    listitem.children( ".ui-btn" ).removeClass( "ui-btn-active" );
                    $( "#confirm #yes" ).off();
                });
            }
        });
    </script>
    <style>
        /* Left transition */
        li.left {
            -webkit-transition: -webkit-transform 250ms ease;
            -webkit-transform: translateX(-100%);
            -moz-transition: -moz-transform 250ms ease;
            -moz-transform: translateX(-100%);
            -o-transition: -o-transform 250ms ease;
            -o-transform: translateX(-100%);
            transition: transform 250ms ease;
            transform: translateX(-100%);
        }
        /* Right transition */
        li.right {
            -webkit-transition: -webkit-transform 250ms ease;
            -webkit-transform: translateX(100%);
            -moz-transition: -moz-transform 250ms ease;
            -moz-transform: translateX(100%);
            -o-transition: -o-transform 250ms ease;
            -o-transform: translateX(100%);
            transition: transform 250ms ease;
            transform: translateX(100%);
        }
        /* Border bottom for the previous button during the transition*/
        li.left a.ui-btn,
        li.right a.ui-btn {
            border-top-width: 0;
            border-left-width: 1px;
            border-right-width: 1px;
        }
        li a.ui-btn.border-bottom {
            border-bottom-width: 1px;
        }
        /* Hide the delete button on touch devices */
        ul.touch li.ui-li-has-alt a.delete {
            display: none;
        }
        ul.touch li.ui-li-has-alt a.ui-btn {
            margin-right:0;
        }
        /* Styling for the popup */
        #confirm p {
            text-align: center;
            font-size: inherit;
            margin-bottom: .75em;
        }
    </style>

    <div data-role="page" class="jqm-demos jqm-home" id="demo-intro">
        {% include '::includes/header.html.twig' %}
        <div role="main" class="ui-content jqm-content">

            <div style="padding-top: 45px;" class="ui-page ui-page-theme-a ui-page-header-fixed ui-page-active" tabindex="0" data-url="demo-page" data-role="page" id="demo-page" data-title="Inbox">
                <div role="main" class="ui-content">
                    <ul id="list" data-count-theme="b" class="ui-listview" data-role="listview" data-icon="false"
                        data-split-icon="delete">
                        <li class="ui-li-has-alt ui-first-child">
                            <a class="ui-btn" href="#demo-mail">
                                <img src="../_assets/img/album-bb.jpg">
                                <h3>Produs 1</h3>
                                <p><strong>Short description</strong></p>
                                <p>Long description blah blah blah blah blah blah blah</p>
                                <span class="ui-li-count">12</span>
                            </a>
                            <a title="Remove from favorites" href="#" class="delete ui-btn ui-btn-icon-notext
                            ui-icon-star"></a>
                        </li>
                        <li class="ui-li-has-alt">
                            <a class="ui-btn" href="#demo-mail">
                                <img src="../_assets/img/album-bb.jpg">
                                <h3>Produs 2</h3>
                                <p><strong>Short description</strong></p>
                                <p>Long description blah blah blah blah blah blah blah</p>
                                <span class="ui-li-count">35</span>
                            </a>
                            <a title="Remove from favorites" href="#" class="delete ui-btn ui-btn-icon-notext
                            ui-icon-star"></a>
                        </li>
                        <li class="ui-li-has-alt">
                            <a class="ui-btn" href="#demo-mail">
                                <img src="../_assets/img/album-bb.jpg">
                                <h3>Produs 2</h3>
                                <p><strong>Short description</strong></p>
                                <p>Long description blah blah blah blah blah blah blah</p>
                                <span class="ui-li-count">35</span>
                            </a>
                            <a href="#" class="ui-btn"></a>
                        </li>
                    </ul>
                </div><!-- /content -->
                <div id="confirm-placeholder" style="display: none;"><!-- placeholder for confirm --></div><!-- /popup -->
                <div id="confirm-screen" class="ui-popup-screen ui-overlay-inherit ui-screen-hidden"></div><div id="confirm-popup" class="ui-popup-container ui-popup-hidden ui-popup-truncate"><div id="confirm" class="ui-content ui-popup ui-body-a ui-overlay-shadow ui-corner-all" data-role="popup" data-theme="a">
                        <p id="question">Set this product as bought?</p>
                        <div class="ui-grid-a">
                            <div class="ui-block-a">
                                <a href="#" id="yes" class="ui-btn ui-corner-all ui-mini ui-btn-a"
                                   data-rel="back">Yes</a>
                            </div>
                            <div class="ui-block-b">
                                <a href="#" id="cancel" class="ui-btn ui-corner-all ui-mini ui-btn-a"
                                   data-rel="back">Cancel</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div><!-- /content -->
        {% include '::includes/menu.html.twig' %}
        {% include '::includes/footer.html.twig' %}

    </div><!-- /page -->

{% endblock %}
